import{h as J,p as K,T as ie,F as ue}from"./hooks.module.e6e2c3cf.js";import{l as X}from"./preact.module.995ee422.js";function fe(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var z={exports:{}},j={exports:{}};(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;function s(f){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(n){return typeof n}:s=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s(f)}function c(f){var i=typeof f=="string"||f instanceof String;if(!i){var n=s(f);throw f===null?n="null":n==="object"&&(n=f.constructor.name),new TypeError("Expected a string but received a ".concat(n))}}l.exports=e.default,l.exports.default=e.default})(j,j.exports);var G=j.exports,B={exports:{}},H={exports:{}};(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function s(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1?arguments[1]:void 0;for(var i in f)typeof c[i]>"u"&&(c[i]=f[i]);return c}l.exports=e.default,l.exports.default=e.default})(H,H.exports);var ee=H.exports;(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var s=f(G),c=f(ee);function f(t){return t&&t.__esModule?t:{default:t}}var i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function n(t,u){(0,s.default)(t),u=(0,c.default)(u,i),u.allow_trailing_dot&&t[t.length-1]==="."&&(t=t.substring(0,t.length-1)),u.allow_wildcard===!0&&t.indexOf("*.")===0&&(t=t.substring(2));var v=t.split("."),_=v[v.length-1];return u.require_tld&&(v.length<2||!u.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(_)||/\s/.test(_))||!u.allow_numeric_tld&&/^\d+$/.test(_)?!1:v.every(function(d){return!(d.length>63&&!u.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(d)||/[\uff01-\uff5e]/.test(d)||/^-|-$/.test(d)||!u.allow_underscores&&/_/.test(d))})}l.exports=e.default,l.exports.default=e.default})(B,B.exports);var de=B.exports,Q={exports:{}};(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=v;var s=c(G);function c(_){return _&&_.__esModule?_:{default:_}}var f="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(f,"[.]){3}").concat(f),n=new RegExp("^".concat(i,"$")),t="(?:[0-9a-fA-F]{1,4})",u=new RegExp("^("+"(?:".concat(t,":){7}(?:").concat(t,"|:)|")+"(?:".concat(t,":){6}(?:").concat(i,"|:").concat(t,"|:)|")+"(?:".concat(t,":){5}(?::").concat(i,"|(:").concat(t,"){1,2}|:)|")+"(?:".concat(t,":){4}(?:(:").concat(t,"){0,1}:").concat(i,"|(:").concat(t,"){1,3}|:)|")+"(?:".concat(t,":){3}(?:(:").concat(t,"){0,2}:").concat(i,"|(:").concat(t,"){1,4}|:)|")+"(?:".concat(t,":){2}(?:(:").concat(t,"){0,3}:").concat(i,"|(:").concat(t,"){1,5}|:)|")+"(?:".concat(t,":){1}(?:(:").concat(t,"){0,4}:").concat(i,"|(:").concat(t,"){1,6}|:)|")+"(?::((?::".concat(t,"){0,5}:").concat(i,"|(?::").concat(t,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function v(_){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,s.default)(_),d=String(d),d?d==="4"?n.test(_):d==="6"?u.test(_):!1:v(_,4)||v(_,6)}l.exports=e.default,l.exports.default=e.default})(Q,Q.exports);var he=Q.exports;(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=se;var s=n(G),c=n(de),f=n(he),i=n(ee);function n(r){return r&&r.__esModule?r:{default:r}}function t(r,o){return m(r)||d(r,o)||v(r,o)||u()}function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(r,o){if(r){if(typeof r=="string")return _(r,o);var h=Object.prototype.toString.call(r).slice(8,-1);if(h==="Object"&&r.constructor&&(h=r.constructor.name),h==="Map"||h==="Set")return Array.from(r);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _(r,o)}}function _(r,o){(o==null||o>r.length)&&(o=r.length);for(var h=0,g=new Array(o);h<o;h++)g[h]=r[h];return g}function d(r,o){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var h=[],g=!0,b=!1,R=void 0;try{for(var E=r[Symbol.iterator](),S;!(g=(S=E.next()).done)&&(h.push(S.value),!(o&&h.length===o));g=!0);}catch(p){b=!0,R=p}finally{try{!g&&E.return!=null&&E.return()}finally{if(b)throw R}}return h}}function m(r){if(Array.isArray(r))return r}var M={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},k=/^\[([^\]]+)\](?::([0-9]+))?$/;function ae(r){return Object.prototype.toString.call(r)==="[object RegExp]"}function Y(r,o){for(var h=0;h<o.length;h++){var g=o[h];if(r===g||ae(g)&&g.test(r))return!0}return!1}function se(r,o){if((0,s.default)(r),!r||/[\s<>]/.test(r)||r.indexOf("mailto:")===0||(o=(0,i.default)(o,M),o.validate_length&&r.length>=2083)||!o.allow_fragments&&r.includes("#")||!o.allow_query_components&&(r.includes("?")||r.includes("&")))return!1;var h,g,b,R,E,S,p,O;if(p=r.split("#"),r=p.shift(),p=r.split("?"),r=p.shift(),p=r.split("://"),p.length>1){if(h=p.shift().toLowerCase(),o.require_valid_protocol&&o.protocols.indexOf(h)===-1)return!1}else{if(o.require_protocol)return!1;if(r.slice(0,2)==="//"){if(!o.allow_protocol_relative_urls)return!1;p[0]=r.slice(2)}}if(r=p.join("://"),r==="")return!1;if(p=r.split("/"),r=p.shift(),r===""&&!o.require_host)return!0;if(p=r.split("@"),p.length>1){if(o.disallow_auth||p[0]===""||(g=p.shift(),g.indexOf(":")>=0&&g.split(":").length>2))return!1;var le=g.split(":"),W=t(le,2),oe=W[0],ce=W[1];if(oe===""&&ce==="")return!1}R=p.join("@"),S=null,O=null;var V=R.match(k);if(V?(b="",O=V[1],S=V[2]||null):(p=R.split(":"),b=p.shift(),p.length&&(S=p.join(":"))),S!==null&&S.length>0){if(E=parseInt(S,10),!/^[0-9]+$/.test(S)||E<=0||E>65535)return!1}else if(o.require_port)return!1;return o.host_whitelist?Y(b,o.host_whitelist):b===""&&!o.require_host?!0:!(!(0,f.default)(b)&&!(0,c.default)(b,o)&&(!O||!(0,f.default)(O,6))||(b=b||O,o.host_blacklist&&Y(b,o.host_blacklist)))}l.exports=e.default,l.exports.default=e.default})(z,z.exports);var pe=z.exports;const _e=fe(pe);let ve=class{#e;#t;#r;#n;constructor(){this.#e={},this.#t=[],this.#r=!1,this.#n=()=>{speechSynthesis.getVoices().forEach(e=>{const{lang:s}=e;s.length===5&&(this.#e[s]?this.#e[s]+=1:this.#e[s]=1),this.#r=!0,this.#t.forEach(c=>{c(this.#e)}),speechSynthesis.removeEventListener("voiceschanged",this.#n)})},speechSynthesis.addEventListener("voiceschanged",this.#n)}speak(e,s,c){const f=new SpeechSynthesisUtterance(e);f.voice=this.#e[s]?c<=this.#e[s]?speechSynthesis.getVoices().filter(i=>i.lang===s)[c-1]:speechSynthesis.getVoices().filter(i=>i.lang===s)[0]:speechSynthesis.getVoices()[0],console.log(c),console.log(f),speechSynthesis.speak(f)}getVoices(){return structuredClone(this.#e)}whenReady(e){this.#r?e(this.#e):this.#t.push(e)}};const Z=new ve;function me(){const[l,e]=J({});return K(()=>{Z.whenReady(s=>{e(s)})},[]),l}var ge=0;function a(l,e,s,c,f,i){var n,t,u={};for(t in e)t=="ref"?n=e[t]:u[t]=e[t];var v={type:l,props:u,key:s,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--ge,__source:f,__self:i};if(typeof l=="function"&&(n=l.defaultProps))for(t in n)u[t]===void 0&&(u[t]=n[t]);return X.vnode&&X.vnode(v),v}const $="channel",T="default_avatar",I="style",D="tts",A="tts_accent",F="tts_index",U="render",L="bots",q="pato_bot",C="htmli",N="_valid",x="m-1",w="mr-2",P="bg-zinc-950 text-zinc-100 border-b-2 border-zinc-300 focus:border-amber-300 transition-all",y={};y[$]="chrisvdev";y[T]="";y[`${T}${N}`]=!0;y[I]="";y[`${I}${N}`]=!0;y[D]=!0;y[A]="";y[F]="";y[U]=!0;y[L]="";y[q]=!0;y[C]=!1;const te=[$,L],ye=[L],re=[D,U,q,C],ne=[T,I],be="https://obs-chat.christianvillegas.com/";function Se(l){const e=new URL(be);return te.forEach(s=>{l[s]&&e.searchParams.append(s,l[s])}),ne.forEach(s=>{l[s]&&e.searchParams.append(s,l[s])}),re.forEach(s=>{l[s]&&e.searchParams.append(s,l[s])}),e.toString()}function Te(){const l=me(),[e,s]=J(structuredClone(y)),c=ie(n=>{const t=/^[A-Za-z0-9_]*$/,u=/^[A-Za-z0-9_,]*$/,v=(d,m)=>{s(M=>{const k={...M};return k[m||n]=d,k})},_=()=>{s(d=>structuredClone(d))};return te.includes(n)?d=>{const{value:m}=d.currentTarget;(ye.includes(n)?u.test(m):t.test(m))?v(m):_()}:re.includes(n)?d=>{const{checked:m}=d.currentTarget;typeof m=="boolean"?v(m):_()}:ne.includes(n)?d=>{const{value:m}=d.currentTarget;v(m),v(m===""||_e(m),`${n}${N}`)}:d=>{const{value:m}=d.currentTarget;v(m)}},[]);K(()=>{const n=()=>{s(t=>{const u={...t};return u[A]=speechSynthesis.getVoices()[0].lang,u[F]=1,u})};Z.whenReady(n)},[]);const f=n=>{const t=[];for(let u=1;u<=n;u++)t.push(a("option",{children:u}));return t},i=ue(()=>e[$]?.length>3&&e[`${T}${N}`]&&e[`${I}${N}`],[e[$],e[`${T}${N}`],e[`${I}${N}`]]);return a("section",{className:"mx-auto max-w-md",children:a("form",{onSubmit:n=>{n.preventDefault(),navigator.clipboard.writeText(Se(e)).then(()=>{console.log("copiado")}).catch(()=>{console.error("No se copio")})},children:[a("div",{className:x,children:[a("label",{className:w,children:"Channel"}),a("input",{className:P,value:e[$],type:"text",name:$,onInput:c($)})]}),a("div",{className:x,children:[a("label",{className:w,children:"Custom CSS Style"}),a("input",{className:P,value:e[I],type:"text",name:I,onInput:c(I)})]}),e[`${I}${N}`]||a("p",{children:"Is not a valid URL"}),a("div",{className:x,children:[a("label",{className:w,children:"Default Avatar"}),a("input",{className:P,value:e[T],type:"text",name:T,onInput:c(T)})]}),e[`${T}${N}`]||a("p",{children:"Is not a valid URL"}),a("div",{className:x,children:[a("label",{className:w,children:"TTS"}),a("input",{checked:e[D],type:"checkbox",name:D,onInput:c(D)})]}),a("div",{className:x,children:[a("label",{className:w,children:"TTS Accent"}),a("select",{className:P,value:e[A],name:A,onInput:c(A),children:Object.keys(l).sort().map((n,t)=>a("option",{children:n},`voice_${t}`))})]}),a("div",{className:x,children:[a("label",{className:w,children:"Accent variant"}),a("select",{className:P,value:e[F],name:F,onInput:c(F),children:e[A]!==""&&f(l[e[A]])})]}),a("button",{type:"button",onClick:n=>{n.preventDefault(),Z.speak("Esto es una prueba",e[A],e[F])},children:"Test TTS"}),a("div",{className:x,children:[a("label",{className:w,children:"Render"}),a("input",{checked:e[U],type:"checkbox",name:U,onInput:c(U)})]}),a("div",{className:x,children:[a("label",{className:w,children:"Bots"}),a("input",{className:P,value:e[L],type:"text",name:L,onInput:c(L)}),a("p",{className:"font-mono text-xs m-1",children:'Usernames separated by "," like "bot1,bot2,etc"'})]}),a("div",{className:x,children:[a("label",{className:w,children:"PatoBot compatibility"}),a("input",{type:"checkbox",checked:e[q],name:q,onInput:c(q)}),a("p",{children:["(",a("a",{href:"https://elpatobot.com/",children:"You need to have the PatoBot configured."}),")"]})]}),a("div",{className:x,children:[a("label",{className:w,children:"HTML Injection"}),a("input",{type:"checkbox",checked:e[C],name:C,onInput:c(C)}),a("p",{children:"(Experimental, Use on your own risk)"})]}),i?a("button",{type:"submit",children:"Generate URL"}):a("p",{children:" There are some invalid parameters..."})]})})}export{Te as default};
