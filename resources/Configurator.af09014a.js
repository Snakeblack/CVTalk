import{h as G,p as J,T as W}from"./hooks.module.e6e2c3cf.js";import{l as X}from"./preact.module.995ee422.js";function le(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var V={exports:{}},z={exports:{}};(function(i,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;function c(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(l){return typeof l}:c=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},c(o)}function f(o){var n=typeof o=="string"||o instanceof String;if(!n){var l=c(o);throw o===null?l="null":l==="object"&&(l=o.constructor.name),new TypeError("Expected a string but received a ".concat(l))}}i.exports=t.default,i.exports.default=t.default})(z,z.exports);var Q=z.exports,j={exports:{}},H={exports:{}};(function(i,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;function c(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;for(var n in o)typeof f[n]>"u"&&(f[n]=o[n]);return f}i.exports=t.default,i.exports.default=t.default})(H,H.exports);var K=H.exports;(function(i,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var c=o(Q),f=o(K);function o(e){return e&&e.__esModule?e:{default:e}}var n={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function l(e,h){(0,c.default)(e),h=(0,f.default)(h,n),h.allow_trailing_dot&&e[e.length-1]==="."&&(e=e.substring(0,e.length-1)),h.allow_wildcard===!0&&e.indexOf("*.")===0&&(e=e.substring(2));var v=e.split("."),u=v[v.length-1];return h.require_tld&&(v.length<2||!h.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(u)||/\s/.test(u))||!h.allow_numeric_tld&&/^\d+$/.test(u)?!1:v.every(function(d){return!(d.length>63&&!h.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(d)||/[\uff01-\uff5e]/.test(d)||/^-|-$/.test(d)||!h.allow_underscores&&/_/.test(d))})}i.exports=t.default,i.exports.default=t.default})(j,j.exports);var ce=j.exports,B={exports:{}};(function(i,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=v;var c=f(Q);function f(u){return u&&u.__esModule?u:{default:u}}var o="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",n="(".concat(o,"[.]){3}").concat(o),l=new RegExp("^".concat(n,"$")),e="(?:[0-9a-fA-F]{1,4})",h=new RegExp("^("+"(?:".concat(e,":){7}(?:").concat(e,"|:)|")+"(?:".concat(e,":){6}(?:").concat(n,"|:").concat(e,"|:)|")+"(?:".concat(e,":){5}(?::").concat(n,"|(:").concat(e,"){1,2}|:)|")+"(?:".concat(e,":){4}(?:(:").concat(e,"){0,1}:").concat(n,"|(:").concat(e,"){1,3}|:)|")+"(?:".concat(e,":){3}(?:(:").concat(e,"){0,2}:").concat(n,"|(:").concat(e,"){1,4}|:)|")+"(?:".concat(e,":){2}(?:(:").concat(e,"){0,3}:").concat(n,"|(:").concat(e,"){1,5}|:)|")+"(?:".concat(e,":){1}(?:(:").concat(e,"){0,4}:").concat(n,"|(:").concat(e,"){1,6}|:)|")+"(?::((?::".concat(e,"){0,5}:").concat(n,"|(?::").concat(e,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function v(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,c.default)(u),d=String(d),d?d==="4"?l.test(u):d==="6"?h.test(u):!1:v(u,4)||v(u,6)}i.exports=t.default,i.exports.default=t.default})(B,B.exports);var oe=B.exports;(function(i,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=re;var c=l(Q),f=l(ce),o=l(oe),n=l(K);function l(r){return r&&r.__esModule?r:{default:r}}function e(r,s){return U(r)||d(r,s)||v(r,s)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(r,s){if(r){if(typeof r=="string")return u(r,s);var p=Object.prototype.toString.call(r).slice(8,-1);if(p==="Object"&&r.constructor&&(p=r.constructor.name),p==="Map"||p==="Set")return Array.from(r);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return u(r,s)}}function u(r,s){(s==null||s>r.length)&&(s=r.length);for(var p=0,m=new Array(s);p<s;p++)m[p]=r[p];return m}function d(r,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var p=[],m=!0,y=!1,$=void 0;try{for(var A=r[Symbol.iterator](),b;!(m=(b=A.next()).done)&&(p.push(b.value),!(s&&p.length===s));m=!0);}catch(_){y=!0,$=_}finally{try{!m&&A.return!=null&&A.return()}finally{if(y)throw $}}return p}}function U(r){if(Array.isArray(r))return r}var C={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},ee=/^\[([^\]]+)\](?::([0-9]+))?$/;function te(r){return Object.prototype.toString.call(r)==="[object RegExp]"}function Z(r,s){for(var p=0;p<s.length;p++){var m=s[p];if(r===m||te(m)&&m.test(r))return!0}return!1}function re(r,s){if((0,c.default)(r),!r||/[\s<>]/.test(r)||r.indexOf("mailto:")===0||(s=(0,n.default)(s,C),s.validate_length&&r.length>=2083)||!s.allow_fragments&&r.includes("#")||!s.allow_query_components&&(r.includes("?")||r.includes("&")))return!1;var p,m,y,$,A,b,_,L;if(_=r.split("#"),r=_.shift(),_=r.split("?"),r=_.shift(),_=r.split("://"),_.length>1){if(p=_.shift().toLowerCase(),s.require_valid_protocol&&s.protocols.indexOf(p)===-1)return!1}else{if(s.require_protocol)return!1;if(r.slice(0,2)==="//"){if(!s.allow_protocol_relative_urls)return!1;_[0]=r.slice(2)}}if(r=_.join("://"),r==="")return!1;if(_=r.split("/"),r=_.shift(),r===""&&!s.require_host)return!0;if(_=r.split("@"),_.length>1){if(s.disallow_auth||_[0]===""||(m=_.shift(),m.indexOf(":")>=0&&m.split(":").length>2))return!1;var ne=m.split(":"),Y=e(ne,2),ae=Y[0],se=Y[1];if(ae===""&&se==="")return!1}$=_.join("@"),b=null,L=null;var M=$.match(ee);if(M?(y="",L=M[1],b=M[2]||null):(_=$.split(":"),y=_.shift(),_.length&&(b=_.join(":"))),b!==null&&b.length>0){if(A=parseInt(b,10),!/^[0-9]+$/.test(b)||A<=0||A>65535)return!1}else if(s.require_port)return!1;return s.host_whitelist?Z(y,s.host_whitelist):y===""&&!s.require_host?!0:!(!(0,o.default)(y)&&!(0,f.default)(y,s)&&(!L||!(0,o.default)(L,6))||(y=y||L,s.host_blacklist&&Z(y,s.host_blacklist)))}i.exports=t.default,i.exports.default=t.default})(V,V.exports);var ie=V.exports;const ue=le(ie);function fe(){const[i,t]=G({});return J(()=>{speechSynthesis.addEventListener("voiceschanged",()=>{const c={};speechSynthesis.getVoices().forEach(f=>{const{lang:o}=f;o.length===5&&(c[o]?c[o]+=1:c[o]=1)}),t(c)})},[]),i}let de=class{constructor(){this.voices={},speechSynthesis.addEventListener("voiceschanged",()=>{speechSynthesis.getVoices().forEach(t=>{const{lang:c}=t;c.length===5&&(this.voices[c]?this.voices[c]+=1:this.voices[c]=1)})})}speak(t,c,f){const o=new SpeechSynthesisUtterance(t);o.voice=this.voices[c]?f<this.voices[c]?speechSynthesis.getVoices().filter(n=>n.lang===c)[f-1]:speechSynthesis.getVoices().filter(n=>n.lang===c)[0]:speechSynthesis.getVoices()[0],speechSynthesis.speak(o)}getVoices(){return structuredClone(this.voices)}};const he=new de;var pe=0;function a(i,t,c,f,o,n){var l,e,h={};for(e in t)e=="ref"?l=t[e]:h[e]=t[e];var v={type:i,props:h,key:c,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--pe,__source:o,__self:n};if(typeof i=="function"&&(l=i.defaultProps))for(e in l)h[e]===void 0&&(h[e]=l[e]);return X.vnode&&X.vnode(v),v}const E="channel",N="default_avatar",I="style",O="tts",T="tts_accent",F="tts_index",P="render",k="bots",q="pato_bot",D="htmli",w="_valid",S="m-1",x="mr-2",R="bg-zinc-950 text-zinc-100 border-b-2 border-zinc-300 focus:border-amber-300 transition-all",g={};g[E]="chrisvdev";g[N]="";g[`${N}${w}`]=!0;g[I]="";g[`${I}${w}`]=!0;g[O]=!0;g[T]="";g[F]="";g[P]=!0;g[k]="";g[q]=!0;g[D]=!1;const _e=[E,k],ve=[k],me=[O,P,q,D],ge=[N,I];function xe(){const i=fe(),[t,c]=G(structuredClone(g)),f=W(n=>{const l=/^[A-Za-z0-9_]*$/,e=/^[A-Za-z0-9_,]*$/,h=(u,d)=>{c(U=>{const C={...U};return C[d||n]=u,C})},v=()=>{c(u=>structuredClone(u))};return _e.includes(n)?u=>{const{value:d}=u.currentTarget;(ve.includes(n)?e.test(d):l.test(d))?h(d):v()}:me.includes(n)?u=>{const{checked:d}=u.currentTarget;typeof d=="boolean"?h(d):v()}:ge.includes(n)?u=>{const{value:d}=u.currentTarget;h(d),h(d===""||ue(d),`${n}${w}`)}:u=>{const{value:d}=u.currentTarget;h(d)}},[]);J(()=>{const n=()=>{c(l=>{const e={...l};return e[T]=speechSynthesis.getVoices()[0].lang,e[F]=1,e})};return speechSynthesis.addEventListener("voiceschanged",n),()=>{speechSynthesis.removeEventListener("voiceschanged",n)}},[]);const o=n=>{const l=[];for(let e=1;e<=n;e++)l.push(a("option",{children:e}));return l};return W(()=>t[E]?.length>3&&t[`${N}${w}`]&&t[`${I}${w}`],[t[E],t[`${N}${w}`],t[`${I}${w}`]]),a("section",{className:"mx-auto max-w-md",children:a("form",{children:[a("div",{className:S,children:[a("label",{className:x,children:"Channel"}),a("input",{className:R,value:t[E],type:"text",name:E,onInput:f(E)})]}),a("div",{className:S,children:[a("label",{className:x,children:"Custom CSS Style"}),a("input",{className:R,value:t[I],type:"text",name:I,onInput:f(I)})]}),t[`${I}${w}`]||a("p",{children:"Is not a valid URL"}),a("div",{className:S,children:[a("label",{className:x,children:"Default Avatar"}),a("input",{className:R,value:t[N],type:"text",name:N,onInput:f(N)})]}),t[`${N}${w}`]||a("p",{children:"Is not a valid URL"}),a("div",{className:S,children:[a("label",{className:x,children:"TTS"}),a("input",{checked:t[O],type:"checkbox",name:O,onInput:f(O)})]}),a("div",{className:S,children:[a("label",{className:x,children:"TTS Accent"}),a("select",{className:R,value:t[T],name:T,onInput:f(T),children:Object.keys(i).sort().map((n,l)=>a("option",{children:n},`voice_${l}`))})]}),a("div",{className:S,children:[a("label",{className:x,children:"Accent variant"}),a("select",{className:R,value:t[F],name:F,onInput:f(F),children:t[T]!==""&&o(i[t[T]])})]}),a("button",{type:"button",onClick:n=>{n.preventDefault(),he.speak("Esto es una prueba",t[T],t[F])},children:"Test TTS"}),a("div",{className:S,children:[a("label",{className:x,children:"Render"}),a("input",{checked:t[P],type:"checkbox",name:P,onInput:f(P)})]}),a("div",{className:S,children:[a("label",{className:x,children:"Bots"}),a("input",{className:R,value:t[k],type:"text",name:k,onInput:f(k)}),a("p",{className:"font-mono text-xs m-1",children:'Usernames separated by "," like "bot1,bot2,etc"'})]}),a("div",{className:S,children:[a("label",{className:x,children:"PatoBot compatibility"}),a("input",{type:"checkbox",checked:t[q],name:q,onInput:f(q)}),a("p",{children:["(",a("a",{href:"https://elpatobot.com/",children:"You need to have the PatoBot configured."}),")"]})]}),a("div",{className:S,children:[a("label",{className:x,children:"HTML Injection"}),a("input",{type:"checkbox",checked:t[D],name:D,onInput:f(D)}),a("p",{children:"(Experimental, Use on your own risk)"})]})]})})}export{xe as default};
