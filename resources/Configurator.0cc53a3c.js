import{h as H,p as te,T as ue,F as fe}from"./hooks.module.e6e2c3cf.js";import{l as ee}from"./preact.module.995ee422.js";function de(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Q={exports:{}},Z={exports:{}};(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;function a(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(u){return typeof u}:a=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},a(i)}function d(i){var s=typeof i=="string"||i instanceof String;if(!s){var u=a(i);throw i===null?u="null":u==="object"&&(u=i.constructor.name),new TypeError("Expected a string but received a ".concat(u))}}l.exports=e.default,l.exports.default=e.default})(Z,Z.exports);var J=Z.exports,G={exports:{}},Y={exports:{}};(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;function a(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var s in i)typeof d[s]>"u"&&(d[s]=i[s]);return d}l.exports=e.default,l.exports.default=e.default})(Y,Y.exports);var re=Y.exports;(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var a=i(J),d=i(re);function i(r){return r&&r.__esModule?r:{default:r}}var s={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function u(r,c){(0,a.default)(r),c=(0,d.default)(c,s),c.allow_trailing_dot&&r[r.length-1]==="."&&(r=r.substring(0,r.length-1)),c.allow_wildcard===!0&&r.indexOf("*.")===0&&(r=r.substring(2));var h=r.split("."),f=h[h.length-1];return c.require_tld&&(h.length<2||!c.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(f)||/\s/.test(f))||!c.allow_numeric_tld&&/^\d+$/.test(f)?!1:h.every(function(m){return!(m.length>63&&!c.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(m)||/[\uff01-\uff5e]/.test(m)||/^-|-$/.test(m)||!c.allow_underscores&&/_/.test(m))})}l.exports=e.default,l.exports.default=e.default})(G,G.exports);var he=G.exports,W={exports:{}};(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;var a=d(J);function d(f){return f&&f.__esModule?f:{default:f}}var i="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",s="(".concat(i,"[.]){3}").concat(i),u=new RegExp("^".concat(s,"$")),r="(?:[0-9a-fA-F]{1,4})",c=new RegExp("^("+"(?:".concat(r,":){7}(?:").concat(r,"|:)|")+"(?:".concat(r,":){6}(?:").concat(s,"|:").concat(r,"|:)|")+"(?:".concat(r,":){5}(?::").concat(s,"|(:").concat(r,"){1,2}|:)|")+"(?:".concat(r,":){4}(?:(:").concat(r,"){0,1}:").concat(s,"|(:").concat(r,"){1,3}|:)|")+"(?:".concat(r,":){3}(?:(:").concat(r,"){0,2}:").concat(s,"|(:").concat(r,"){1,4}|:)|")+"(?:".concat(r,":){2}(?:(:").concat(r,"){0,3}:").concat(s,"|(:").concat(r,"){1,5}|:)|")+"(?:".concat(r,":){1}(?:(:").concat(r,"){0,4}:").concat(s,"|(:").concat(r,"){1,6}|:)|")+"(?::((?::".concat(r,"){0,5}:").concat(s,"|(?::").concat(r,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function h(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,a.default)(f),m=String(m),m?m==="4"?u.test(f):m==="6"?c.test(f):!1:h(f,4)||h(f,6)}l.exports=e.default,l.exports.default=e.default})(W,W.exports);var pe=W.exports;(function(l,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=le;var a=u(J),d=u(he),i=u(pe),s=u(re);function u(t){return t&&t.__esModule?t:{default:t}}function r(t,o){return M(t)||m(t,o)||h(t,o)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(t,o){if(t){if(typeof t=="string")return f(t,o);var p=Object.prototype.toString.call(t).slice(8,-1);if(p==="Object"&&t.constructor&&(p=t.constructor.name),p==="Map"||p==="Set")return Array.from(t);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return f(t,o)}}function f(t,o){(o==null||o>t.length)&&(o=t.length);for(var p=0,g=new Array(o);p<o;p++)g[p]=t[p];return g}function m(t,o){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var p=[],g=!0,x=!1,R=void 0;try{for(var E=t[Symbol.iterator](),S;!(g=(S=E.next()).done)&&(p.push(S.value),!(o&&p.length===o));g=!0);}catch(_){x=!0,R=_}finally{try{!g&&E.return!=null&&E.return()}finally{if(x)throw R}}return p}}function M(t){if(Array.isArray(t))return t}var y={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},v=/^\[([^\]]+)\](?::([0-9]+))?$/;function j(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function O(t,o){for(var p=0;p<o.length;p++){var g=o[p];if(t===g||j(g)&&g.test(t))return!0}return!1}function le(t,o){if((0,a.default)(t),!t||/[\s<>]/.test(t)||t.indexOf("mailto:")===0||(o=(0,s.default)(o,y),o.validate_length&&t.length>=2083)||!o.allow_fragments&&t.includes("#")||!o.allow_query_components&&(t.includes("?")||t.includes("&")))return!1;var p,g,x,R,E,S,_,C;if(_=t.split("#"),t=_.shift(),_=t.split("?"),t=_.shift(),_=t.split("://"),_.length>1){if(p=_.shift().toLowerCase(),o.require_valid_protocol&&o.protocols.indexOf(p)===-1)return!1}else{if(o.require_protocol)return!1;if(t.slice(0,2)==="//"){if(!o.allow_protocol_relative_urls)return!1;_[0]=t.slice(2)}}if(t=_.join("://"),t==="")return!1;if(_=t.split("/"),t=_.shift(),t===""&&!o.require_host)return!0;if(_=t.split("@"),_.length>1){if(o.disallow_auth||_[0]===""||(g=_.shift(),g.indexOf(":")>=0&&g.split(":").length>2))return!1;var oe=g.split(":"),K=r(oe,2),ce=K[0],ie=K[1];if(ce===""&&ie==="")return!1}R=_.join("@"),S=null,C=null;var B=R.match(v);if(B?(x="",C=B[1],S=B[2]||null):(_=R.split(":"),x=_.shift(),_.length&&(S=_.join(":"))),S!==null&&S.length>0){if(E=parseInt(S,10),!/^[0-9]+$/.test(S)||E<=0||E>65535)return!1}else if(o.require_port)return!1;return o.host_whitelist?O(x,o.host_whitelist):x===""&&!o.require_host?!0:!(!(0,i.default)(x)&&!(0,d.default)(x,o)&&(!C||!(0,i.default)(C,6))||(x=x||C,o.host_blacklist&&O(x,o.host_blacklist)))}l.exports=e.default,l.exports.default=e.default})(Q,Q.exports);var _e=Q.exports;const me=de(_e);let ve=class{#e;#t;#r;#n;constructor(){this.#e={},this.#t=[],this.#r=!1,this.#n=()=>{speechSynthesis.getVoices().forEach(e=>{const{lang:a}=e;a.length===5&&(this.#e[a]?this.#e[a]+=1:this.#e[a]=1),this.#r=!0,this.#t.forEach(d=>{d(this.#e)}),speechSynthesis.removeEventListener("voiceschanged",this.#n)})},speechSynthesis.addEventListener("voiceschanged",this.#n)}speak(e,a,d){const i=new SpeechSynthesisUtterance(e);i.voice=this.#e[a]?d<=this.#e[a]?speechSynthesis.getVoices().filter(s=>s.lang===a)[d-1]:speechSynthesis.getVoices().filter(s=>s.lang===a)[0]:speechSynthesis.getVoices()[0],console.log(d),console.log(i),speechSynthesis.speak(i)}getVoices(){return structuredClone(this.#e)}whenReady(e){this.#r?e(this.#e):this.#t.push(e)}};const X=new ve;function ge(){const[l,e]=H({});return te(()=>{X.whenReady(a=>{e(a)})},[]),l}var ye=0;function n(l,e,a,d,i,s){var u,r,c={};for(r in e)r=="ref"?u=e[r]:c[r]=e[r];var h={type:l,props:c,key:a,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--ye,__source:i,__self:s};if(typeof l=="function"&&(u=l.defaultProps))for(r in u)c[r]===void 0&&(c[r]=u[r]);return ee.vnode&&ee.vnode(h),h}const $="channel",T="default_avatar",I="style",D="tts",A="tts_accent",F="tts_index",U="render",L="bots",q="pato_bot",k="htmli",w="_valid",z="flex flex-col m-1",V="flex m-1",N="mr-2 my-1 text-base",P="px-2 py-1 rounded-lg bg-zinc-800 text-zinc-100 border border-zinc-700 hover:border-zinc-400 focus:border-amber-300 transition-all",b={};b[$]="chrisvdev";b[T]="";b[`${T}${w}`]=!0;b[I]="";b[`${I}${w}`]=!0;b[D]=!0;b[A]="";b[F]="";b[U]=!0;b[L]="";b[q]=!0;b[k]=!1;const ne=[$,L],be=[L],ae=[D,U,q,k],se=[T,I],xe="https://obs-chat.christianvillegas.com/";function Se(l){const e=new URL(xe);return ne.forEach(a=>{l[a]&&e.searchParams.append(a,l[a])}),se.forEach(a=>{l[a]&&e.searchParams.append(a,l[a])}),ae.forEach(a=>{e.searchParams.append(a,l[a])}),e.toString()}function Ie(){const l=ge(),[e,a]=H(structuredClone(b)),[d,i]=H(!1),s=ue(c=>{const h=/^[A-Za-z0-9_]*$/,f=/^[A-Za-z0-9_,]*$/,m=(y,v)=>{a(j=>{const O={...j};return O[v||c]=y,O})},M=()=>{a(y=>structuredClone(y))};return ne.includes(c)?y=>{const{value:v}=y.currentTarget;(be.includes(c)?f.test(v):h.test(v))?m(v):M()}:ae.includes(c)?y=>{const{checked:v}=y.currentTarget;typeof v=="boolean"?m(v):M()}:se.includes(c)?y=>{const{value:v}=y.currentTarget;m(v),m(v===""||me(v),`${c}${w}`)}:y=>{const{value:v}=y.currentTarget;m(v)}},[]);te(()=>{const c=()=>{a(h=>{const f={...h};return f[A]=speechSynthesis.getVoices()[0].lang,f[F]=1,f})};X.whenReady(c)},[]);const u=c=>{const h=[];for(let f=1;f<=c;f++)h.push(n("option",{children:f}));return h},r=fe(()=>e[$]?.length>3&&e[`${T}${w}`]&&e[`${I}${w}`],[e[$],e[`${T}${w}`],e[`${I}${w}`]]);return n("section",{className:"mx-auto max-w-md",children:n("form",{onSubmit:c=>{c.preventDefault(),d||navigator.clipboard.writeText(Se(e)).then(()=>{i(!0),setTimeout(()=>{i(!1)},1e3)}).catch(()=>{console.error("No se copio")})},className:"flex flex-col items-start px-4 py-2 border border-zinc-400 rounded-lg",children:[n("div",{className:z,children:[n("label",{className:N,children:"Channel"}),n("input",{className:P,value:e[$],type:"text",name:$,onInput:s($)})]}),n("div",{className:z,children:[n("label",{className:N,children:"Custom CSS Style"}),n("input",{className:P,value:e[I],type:"text",name:I,onInput:s(I)})]}),e[`${I}${w}`]||n("p",{className:"text-red-600",children:"Is not a valid URL"}),n("div",{className:z,children:[n("label",{className:N,children:"Default Avatar"}),n("input",{className:P,value:e[T],type:"text",name:T,onInput:s(T)})]}),e[`${T}${w}`]||n("p",{className:"text-red-600",children:"Is not a valid URL"}),n("div",{className:V,children:[n("label",{className:N,children:"TTS"}),n("input",{checked:e[D],type:"checkbox",name:D,onInput:s(D)})]}),n("div",{className:z,children:[n("label",{className:N,children:"TTS Accent"}),n("select",{className:P,value:e[A],name:A,onInput:s(A),children:Object.keys(l).sort().map((c,h)=>n("option",{children:c},`voice_${h}`))})]}),n("div",{className:z,children:[n("label",{className:N,children:"Accent variant"}),n("select",{className:P,value:e[F],name:F,onInput:s(F),children:e[A]!==""&&u(l[e[A]])})]}),n("button",{className:"my-2 px-2 py-1 rounded-lg bg-zinc-800 text-zinc-100 border border-zinc-700 hover:border-zinc-400 focus:border-amber-300 transition-all",type:"button",onClick:c=>{c.preventDefault(),X.speak("Esto es una prueba",e[A],e[F])},children:"Test TTS"}),n("div",{className:V,children:[n("label",{className:N,children:"Render"}),n("input",{checked:e[U],type:"checkbox",name:U,onInput:s(U)})]}),n("div",{className:z,children:[n("label",{className:N,children:"Bots"}),n("input",{className:P,value:e[L],type:"text",name:L,onInput:s(L)}),n("p",{className:"font-mono text-xs m-1",children:'Usernames separated by "," like "bot1,bot2,etc"'})]}),n("div",{className:V,children:[n("label",{className:N,children:"PatoBot compatibility"}),n("input",{type:"checkbox",checked:e[q],name:q,onInput:s(q)})]}),n("p",{className:"italic text-xs text-zinc-400 hover:text-zinc-100 transition-all cursor-pointer",children:["(",n("a",{href:"https://elpatobot.com/",children:"You need to have the PatoBot configured."}),")"]}),n("div",{className:V,children:[n("label",{className:N,children:"HTML Injection"}),n("input",{type:"checkbox",checked:e[k],name:k,onInput:s(k)})]}),n("p",{className:"italic text-xs text-zinc-400",children:"(Experimental, Use on your own risk)"}),n("div",{className:"flex justify-center w-full",children:r?n("button",{className:`m-4 px-2 py-1 rounded-lg bg-zinc-800 text-zinc-100 border border-zinc-700 hover:border-zinc-400 transition-all${d?" bg-zinc-500 scale-105 text-zinc-950 font-semibold ":""}`,type:"submit",children:d?"Copied to the clipboard":"Generate URL"}):n("p",{className:"m-4 px-2 py-1 text-red-600",children:"There are some invalid parameters..."})})]})})}export{Ie as default};
