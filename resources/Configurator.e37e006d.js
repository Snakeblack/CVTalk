import{h as H,p as te,T as ue,F as fe}from"./hooks.module.e6e2c3cf.js";import{l as ee}from"./preact.module.995ee422.js";function de(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Q={exports:{}},Z={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;function n(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(u){return typeof u}:n=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},n(i)}function d(i){var l=typeof i=="string"||i instanceof String;if(!l){var u=n(i);throw i===null?u="null":u==="object"&&(u=i.constructor.name),new TypeError("Expected a string but received a ".concat(u))}}s.exports=e.default,s.exports.default=e.default})(Z,Z.exports);var J=Z.exports,G={exports:{}},Y={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var l in i)typeof d[l]>"u"&&(d[l]=i[l]);return d}s.exports=e.default,s.exports.default=e.default})(Y,Y.exports);var re=Y.exports;(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=i(J),d=i(re);function i(r){return r&&r.__esModule?r:{default:r}}var l={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function u(r,c){(0,n.default)(r),c=(0,d.default)(c,l),c.allow_trailing_dot&&r[r.length-1]==="."&&(r=r.substring(0,r.length-1)),c.allow_wildcard===!0&&r.indexOf("*.")===0&&(r=r.substring(2));var h=r.split("."),f=h[h.length-1];return c.require_tld&&(h.length<2||!c.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(f)||/\s/.test(f))||!c.allow_numeric_tld&&/^\d+$/.test(f)?!1:h.every(function(m){return!(m.length>63&&!c.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(m)||/[\uff01-\uff5e]/.test(m)||/^-|-$/.test(m)||!c.allow_underscores&&/_/.test(m))})}s.exports=e.default,s.exports.default=e.default})(G,G.exports);var he=G.exports,W={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;var n=d(J);function d(f){return f&&f.__esModule?f:{default:f}}var i="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",l="(".concat(i,"[.]){3}").concat(i),u=new RegExp("^".concat(l,"$")),r="(?:[0-9a-fA-F]{1,4})",c=new RegExp("^("+"(?:".concat(r,":){7}(?:").concat(r,"|:)|")+"(?:".concat(r,":){6}(?:").concat(l,"|:").concat(r,"|:)|")+"(?:".concat(r,":){5}(?::").concat(l,"|(:").concat(r,"){1,2}|:)|")+"(?:".concat(r,":){4}(?:(:").concat(r,"){0,1}:").concat(l,"|(:").concat(r,"){1,3}|:)|")+"(?:".concat(r,":){3}(?:(:").concat(r,"){0,2}:").concat(l,"|(:").concat(r,"){1,4}|:)|")+"(?:".concat(r,":){2}(?:(:").concat(r,"){0,3}:").concat(l,"|(:").concat(r,"){1,5}|:)|")+"(?:".concat(r,":){1}(?:(:").concat(r,"){0,4}:").concat(l,"|(:").concat(r,"){1,6}|:)|")+"(?::((?::".concat(r,"){0,5}:").concat(l,"|(?::").concat(r,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function h(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,n.default)(f),m=String(m),m?m==="4"?u.test(f):m==="6"?c.test(f):!1:h(f,4)||h(f,6)}s.exports=e.default,s.exports.default=e.default})(W,W.exports);var pe=W.exports;(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=le;var n=u(J),d=u(he),i=u(pe),l=u(re);function u(t){return t&&t.__esModule?t:{default:t}}function r(t,o){return M(t)||m(t,o)||h(t,o)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(t,o){if(t){if(typeof t=="string")return f(t,o);var p=Object.prototype.toString.call(t).slice(8,-1);if(p==="Object"&&t.constructor&&(p=t.constructor.name),p==="Map"||p==="Set")return Array.from(t);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return f(t,o)}}function f(t,o){(o==null||o>t.length)&&(o=t.length);for(var p=0,g=new Array(o);p<o;p++)g[p]=t[p];return g}function m(t,o){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var p=[],g=!0,x=!1,P=void 0;try{for(var E=t[Symbol.iterator](),S;!(g=(S=E.next()).done)&&(p.push(S.value),!(o&&p.length===o));g=!0);}catch(_){x=!0,P=_}finally{try{!g&&E.return!=null&&E.return()}finally{if(x)throw P}}return p}}function M(t){if(Array.isArray(t))return t}var y={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},v=/^\[([^\]]+)\](?::([0-9]+))?$/;function j(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function O(t,o){for(var p=0;p<o.length;p++){var g=o[p];if(t===g||j(g)&&g.test(t))return!0}return!1}function le(t,o){if((0,n.default)(t),!t||/[\s<>]/.test(t)||t.indexOf("mailto:")===0||(o=(0,l.default)(o,y),o.validate_length&&t.length>=2083)||!o.allow_fragments&&t.includes("#")||!o.allow_query_components&&(t.includes("?")||t.includes("&")))return!1;var p,g,x,P,E,S,_,C;if(_=t.split("#"),t=_.shift(),_=t.split("?"),t=_.shift(),_=t.split("://"),_.length>1){if(p=_.shift().toLowerCase(),o.require_valid_protocol&&o.protocols.indexOf(p)===-1)return!1}else{if(o.require_protocol)return!1;if(t.slice(0,2)==="//"){if(!o.allow_protocol_relative_urls)return!1;_[0]=t.slice(2)}}if(t=_.join("://"),t==="")return!1;if(_=t.split("/"),t=_.shift(),t===""&&!o.require_host)return!0;if(_=t.split("@"),_.length>1){if(o.disallow_auth||_[0]===""||(g=_.shift(),g.indexOf(":")>=0&&g.split(":").length>2))return!1;var oe=g.split(":"),K=r(oe,2),ce=K[0],ie=K[1];if(ce===""&&ie==="")return!1}P=_.join("@"),S=null,C=null;var B=P.match(v);if(B?(x="",C=B[1],S=B[2]||null):(_=P.split(":"),x=_.shift(),_.length&&(S=_.join(":"))),S!==null&&S.length>0){if(E=parseInt(S,10),!/^[0-9]+$/.test(S)||E<=0||E>65535)return!1}else if(o.require_port)return!1;return o.host_whitelist?O(x,o.host_whitelist):x===""&&!o.require_host?!0:!(!(0,i.default)(x)&&!(0,d.default)(x,o)&&(!C||!(0,i.default)(C,6))||(x=x||C,o.host_blacklist&&O(x,o.host_blacklist)))}s.exports=e.default,s.exports.default=e.default})(Q,Q.exports);var _e=Q.exports;const me=de(_e);let ve=class{#e;#t;#r;#n;constructor(){this.#e={},this.#t=[],this.#r=!1,this.#n=()=>{speechSynthesis.getVoices().forEach(e=>{const{lang:n}=e;n.length===5&&(this.#e[n]?this.#e[n]+=1:this.#e[n]=1),this.#r=!0,this.#t.forEach(d=>{d(this.#e)}),speechSynthesis.removeEventListener("voiceschanged",this.#n)})},speechSynthesis.addEventListener("voiceschanged",this.#n)}speak(e,n,d){const i=new SpeechSynthesisUtterance(e);i.voice=this.#e[n]?d<=this.#e[n]?speechSynthesis.getVoices().filter(l=>l.lang===n)[d-1]:speechSynthesis.getVoices().filter(l=>l.lang===n)[0]:speechSynthesis.getVoices()[0],console.log(d),console.log(i),speechSynthesis.speak(i)}getVoices(){return structuredClone(this.#e)}whenReady(e){this.#r?e(this.#e):this.#t.push(e)}};const X=new ve;function ge(){const[s,e]=H({});return te(()=>{X.whenReady(n=>{e(n)})},[]),s}var ye=0;function a(s,e,n,d,i,l){var u,r,c={};for(r in e)r=="ref"?u=e[r]:c[r]=e[r];var h={type:s,props:c,key:n,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--ye,__source:i,__self:l};if(typeof s=="function"&&(u=s.defaultProps))for(r in u)c[r]===void 0&&(c[r]=u[r]);return ee.vnode&&ee.vnode(h),h}const $="channel",I="default_avatar",A="style",D="tts",w="tts_accent",R="tts_index",U="render",L="bots",q="pato_bot",k="htmli",T="_valid",z="flex flex-col m-1",V="flex m-1",N="mr-2 my-1 text-base",F="px-2 py-1 rounded-lg bg-zinc-800 text-zinc-100 border border-zinc-700 hover:border-zinc-400 focus:border-amber-300 transition-all",b={};b[$]="chrisvdev";b[I]="";b[`${I}${T}`]=!0;b[A]="";b[`${A}${T}`]=!0;b[D]=!0;b[w]="";b[R]="";b[U]=!0;b[L]="";b[q]=!0;b[k]=!1;const ne=[$,L],be=[L],ae=[D,U,q,k],se=[I,A],xe=[w,R],Se="https://obs-chat.christianvillegas.com/";function Ne(s){const e=new URL(Se);return ne.forEach(n=>{s[n]&&e.searchParams.append(n,s[n])}),se.forEach(n=>{s[n]&&e.searchParams.append(n,s[n])}),ae.forEach(n=>{e.searchParams.append(n,s[n])}),xe.forEach(n=>{e.searchParams.append(n,s[n])}),e.toString()}function Ae(){const s=ge(),[e,n]=H(structuredClone(b)),[d,i]=H(!1),l=ue(c=>{const h=/^[A-Za-z0-9_]*$/,f=/^[A-Za-z0-9_,]*$/,m=(y,v)=>{n(j=>{const O={...j};return O[v||c]=y,O})},M=()=>{n(y=>structuredClone(y))};return ne.includes(c)?y=>{const{value:v}=y.currentTarget;(be.includes(c)?f.test(v):h.test(v))?m(v):M()}:ae.includes(c)?y=>{const{checked:v}=y.currentTarget;typeof v=="boolean"?m(v):M()}:se.includes(c)?y=>{const{value:v}=y.currentTarget;m(v),m(v===""||me(v),`${c}${T}`)}:y=>{const{value:v}=y.currentTarget;m(v)}},[]);te(()=>{const c=()=>{n(h=>{const f={...h};return f[w]=speechSynthesis.getVoices()[0].lang,f[R]=1,f})};X.whenReady(c)},[]);const u=c=>{const h=[];for(let f=1;f<=c;f++)h.push(a("option",{children:f}));return h},r=fe(()=>e[$]?.length>3&&e[`${I}${T}`]&&e[`${A}${T}`],[e[$],e[`${I}${T}`],e[`${A}${T}`]]);return a("section",{className:"mx-auto max-w-md",children:a("form",{onSubmit:c=>{c.preventDefault(),d||navigator.clipboard.writeText(Ne(e)).then(()=>{i(!0),setTimeout(()=>{i(!1)},1e3)}).catch(()=>{console.error("No se copio")})},className:"flex flex-col items-start px-4 py-2 border border-zinc-400 rounded-lg",children:[a("div",{className:z,children:[a("label",{className:N,children:"Channel"}),a("input",{className:F,value:e[$],type:"text",name:$,onInput:l($)})]}),a("div",{className:z,children:[a("label",{className:N,children:"Custom CSS Style"}),a("input",{className:F,value:e[A],type:"text",name:A,onInput:l(A)})]}),e[`${A}${T}`]||a("p",{className:"text-red-600",children:"Is not a valid URL"}),a("div",{className:z,children:[a("label",{className:N,children:"Default Avatar"}),a("input",{className:F,value:e[I],type:"text",name:I,onInput:l(I)})]}),e[`${I}${T}`]||a("p",{className:"text-red-600",children:"Is not a valid URL"}),a("div",{className:V,children:[a("label",{className:N,children:"TTS"}),a("input",{checked:e[D],type:"checkbox",name:D,onInput:l(D)})]}),a("div",{className:z,children:[a("label",{className:N,children:"TTS Accent"}),a("select",{className:F,value:e[w],name:w,onInput:l(w),children:Object.keys(s).sort().map((c,h)=>a("option",{children:c},`voice_${h}`))})]}),a("div",{className:z,children:[a("label",{className:N,children:"Accent variant"}),a("select",{className:F,value:e[R],name:R,onInput:l(R),children:e[w]!==""&&u(s[e[w]])})]}),a("button",{className:"my-2 px-2 py-1 rounded-lg bg-zinc-800 text-zinc-100 border border-zinc-700 hover:border-zinc-400 focus:border-amber-300 transition-all",type:"button",onClick:c=>{c.preventDefault(),X.speak("Esto es una prueba",e[w],e[R])},children:"Test TTS"}),a("div",{className:V,children:[a("label",{className:N,children:"Render"}),a("input",{checked:e[U],type:"checkbox",name:U,onInput:l(U)})]}),a("div",{className:z,children:[a("label",{className:N,children:"Bots"}),a("input",{className:F,value:e[L],type:"text",name:L,onInput:l(L)}),a("p",{className:"font-mono text-xs m-1",children:'Usernames separated by "," like "bot1,bot2,etc"'})]}),a("div",{className:V,children:[a("label",{className:N,children:"PatoBot compatibility"}),a("input",{type:"checkbox",checked:e[q],name:q,onInput:l(q)})]}),a("p",{className:"italic text-xs text-zinc-400 hover:text-zinc-100 transition-all cursor-pointer",children:["(",a("a",{href:"https://elpatobot.com/",children:"You need to have the PatoBot configured."}),")"]}),a("div",{className:V,children:[a("label",{className:N,children:"HTML Injection"}),a("input",{type:"checkbox",checked:e[k],name:k,onInput:l(k)})]}),a("p",{className:"italic text-xs text-zinc-400",children:"(Experimental, Use on your own risk)"}),a("div",{className:"flex justify-center w-full",children:r?a("button",{className:`m-4 px-2 py-1 rounded-lg bg-zinc-800 text-zinc-100 border border-zinc-700 hover:border-zinc-400 transition-all${d?"scale-105 font-semibold ":""}`,type:"submit",children:d?"Copied to the clipboard":"Generate URL"}):a("p",{className:"m-4 px-2 py-1 text-red-600",children:"There are some invalid parameters..."})})]})})}export{Ae as default};
